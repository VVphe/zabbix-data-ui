<template>
  <div style="width:100%" id="itemDataPage">
    <eChart :options="options" style="width:100%"></eChart>
  </div>
</template>

<script>
export default {
  name: "itemDataPage",
  data() {
    return {
//      data: null,
    //  data: [ { "timeStamp": "1521035350", "value": "1054859264" }, { "timeStamp": "1521035410", "value": "1054396416" }, { "timeStamp": "1521035470", "value": "1052774400" }, { "timeStamp": "1521035530", "value": "1051287552" }, { "timeStamp": "1521035590", "value": "1051049984" }, { "timeStamp": "1521035650", "value": "1050828800" }, { "timeStamp": "1521035710", "value": "1050701824" }, { "timeStamp": "1521035770", "value": "1050853376" }, { "timeStamp": "1521035830", "value": "1050984448" }, { "timeStamp": "1521035890", "value": "1052344320" }, { "timeStamp": "1521035950", "value": "1052409856" }, { "timeStamp": "1521036010", "value": "1051508736" }, { "timeStamp": "1521036070", "value": "1052073984" }, { "timeStamp": "1521036130", "value": "1051918336" }, { "timeStamp": "1521036190", "value": "1052385280" }, { "timeStamp": "1521036250", "value": "1052311552" }, { "timeStamp": "1521036310", "value": "1051865088" }, { "timeStamp": "1521036370", "value": "1051783168" }, { "timeStamp": "1521036430", "value": "1052086272" }, { "timeStamp": "1521036490", "value": "1051967488" }, { "timeStamp": "1521036550", "value": "1052356608" }, { "timeStamp": "1521036610", "value": "1053011968" }, { "timeStamp": "1521036670", "value": "1052635136" }, { "timeStamp": "1521036730", "value": "1052401664" }, { "timeStamp": "1521036790", "value": "1052352512" }, { "timeStamp": "1521036850", "value": "1052794880" }, { "timeStamp": "1521036969", "value": "1052479488" }, { "timeStamp": "1521036970", "value": "1052004352" }, { "timeStamp": "1521037030", "value": "1052110848" }, { "timeStamp": "1521037090", "value": "1052020736" }, { "timeStamp": "1521037150", "value": "1051664384" }, { "timeStamp": "1521037210", "value": "1052082176" }, { "timeStamp": "1521037270", "value": "1051553792" }, { "timeStamp": "1521037330", "value": "1051275264" }, { "timeStamp": "1521037390", "value": "1051238400" }, { "timeStamp": "1521037450", "value": "1051475968" }, { "timeStamp": "1521037510", "value": "1051070464" }, { "timeStamp": "1521037570", "value": "1051054080" }, { "timeStamp": "1521037630", "value": "1051406336" }, { "timeStamp": "1521037690", "value": "1050865664" }, { "timeStamp": "1521037750", "value": "1051213824" }, { "timeStamp": "1521037810", "value": "1051189248" }, { "timeStamp": "1521037870", "value": "1051295744" }, { "timeStamp": "1521037930", "value": "1051107328" }, { "timeStamp": "1521037990", "value": "1051217920" }, { "timeStamp": "1521038050", "value": "1051136000" }, { "timeStamp": "1521038110", "value": "1051676672" }, { "timeStamp": "1521038170", "value": "1051357184" }, { "timeStamp": "1521038230", "value": "1051066368" }, { "timeStamp": "1521038290", "value": "1051258880" }, { "timeStamp": "1521038350", "value": "1051332608" }, { "timeStamp": "1521038410", "value": "1051439104" }, { "timeStamp": "1521038470", "value": "1050816512" }, { "timeStamp": "1521038530", "value": "1051115520" }, { "timeStamp": "1521038590", "value": "1051176960" }, { "timeStamp": "1521038650", "value": "1051226112" }, { "timeStamp": "1521038710", "value": "1050923008" }, { "timeStamp": "1521038770", "value": "1050902528" }, { "timeStamp": "1521038830", "value": "1050947584" }, { "timeStamp": "1521038890", "value": "1051119616" }, { "timeStamp": "1521038950", "value": "1051176960" }, { "timeStamp": "1521039010", "value": "1051066368" }, { "timeStamp": "1521039070", "value": "1050914816" }, { "timeStamp": "1521039130", "value": "1050693632" }, { "timeStamp": "1521039190", "value": "1050537984" }, { "timeStamp": "1521039250", "value": "1050599424" }, { "timeStamp": "1521039310", "value": "1050451968" }, { "timeStamp": "1521039370", "value": "1050341376" }, { "timeStamp": "1521039430", "value": "1050501120" }, { "timeStamp": "1521039490", "value": "1050443776" }, { "timeStamp": "1521039550", "value": "1050529792" }, { "timeStamp": "1521039610", "value": "1049874432" }, { "timeStamp": "1521039670", "value": "1050357760" }, { "timeStamp": "1521039730", "value": "1050472448" }, { "timeStamp": "1521039790", "value": "1050468352" }, { "timeStamp": "1521039850", "value": "1050218496" }, { "timeStamp": "1521039910", "value": "1050808320" }, { "timeStamp": "1521039970", "value": "1050738688" }, { "timeStamp": "1521040030", "value": "1050353664" }],
      data: [[1521035350, 1054859264], [1521035410, 1054396416], [1521035470, 1052774400], [1521035530, 1051287552], [1521035590, 1051049984], [1521035650, 1050828800], [1521035710, 1050701824], [1521035770, 1050853376], [1521035830, 1050984448], [1521035890, 1052344320], [1521035950, 1052409856], [1521036010, 1051508736], [1521036070, 1052073984], [1521036130, 1051918336], [1521036190, 1052385280], [1521036250, 1052311552], [1521036310, 1051865088], [1521036370, 1051783168], [1521036430, 1052086272], [1521036490, 1051967488], [1521036550, 1052356608], [1521036610, 1053011968], [1521036670, 1052635136], [1521036730, 1052401664], [1521036790, 1052352512], [1521036850, 1052794880], [1521036969, 1052479488], [1521036970, 1052004352], [1521037030, 1052110848], [1521037090, 1052020736], [1521037150, 1051664384], [1521037210, 1052082176], [1521037270, 1051553792], [1521037330, 1051275264], [1521037390, 1051238400], [1521037450, 1051475968], [1521037510, 1051070464], [1521037570, 1051054080], [1521037630, 1051406336], [1521037690, 1050865664], [1521037750, 1051213824], [1521037810, 1051189248], [1521037870, 1051295744], [1521037930, 1051107328], [1521037990, 1051217920], [1521038050, 1051136000], [1521038110, 1051676672], [1521038170, 1051357184], [1521038230, 1051066368], [1521038290, 1051258880], [1521038350, 1051332608], [1521038410, 1051439104], [1521038470, 1050816512], [1521038530, 1051115520], [1521038590, 1051176960], [1521038650, 1051226112], [1521038710, 1050923008], [1521038770, 1050902528], [1521038830, 1050947584], [1521038890, 1051119616], [1521038950, 1051176960], [1521039010, 1051066368], [1521039070, 1050914816], [1521039130, 1050693632], [1521039190, 1050537984], [1521039250, 1050599424], [1521039310, 1050451968], [1521039370, 1050341376], [1521039430, 1050501120], [1521039490, 1050443776], [1521039550, 1050529792], [1521039610, 1049874432], [1521039670, 1050357760], [1521039730, 1050472448], [1521039790, 1050468352], [1521039850, 1050218496], [1521039910, 1050808320], [1521039970, 1050738688], [1521040030, 1050353664]],
      options: {
        title: {
          left: 'center',
          text: 'Zabbix data'
        },
        tooltip: {
          trigger: "axis"
        },
        grid: {
          left: '15%',
          right: '15%'
        },
        xAxis: {
          type: "time",
          //maxInterval: 60*1000
        },
        yAxis: {
          type: "value",
          min: "dataMin",
          max: "dataMax",
        },
        dataZoom: [
          {
            type: "inside",
            start: 0,
            end: 10
          },
          {
            start: 0,
            end: 10,
            handleIcon:
              "M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",
            handleSize: "80%",
            handleStyle: {
              color: "#fff",
              shadowBlur: 3,
              shadowColor: "rgba(0, 0, 0, 0.6)",
              shadowOffsetX: 2,
              shadowOffsetY: 2
            }
          }
        ],
        series: [
          {
            name: "zabbix-data",
            type: "line",
            sampling: "average",
            lineStyle: {
              color: '#1ab394'
            },
            itemStyle: {
              color: '#999'
            },
            // data: this.data,
            data: [
              [1521035350000, 1054859264],
              [1521035410000, 1054396416],
              [1521035470000, 1052774400],
              [1521035530000, 1051287552],
              [1521035590000, 1051049984],
              [1521035650000, 1050828800],
              [1521035710000, 1050701824],
              [1521035770000, 1050853376],
              [1521035830000, 1050984448],
              [1521035890000, 1052344320],
              [1521035950000, 1052409856],
              [1521036010000, 1051508736],
              [1521036070000, 1052073984],
              [1521036130000, 1051918336],
              [1521036190000, 1052385280],
              [1521036250000, 1052311552],
              [1521036310000, 1051865088],
              [1521036370000, 1051783168],
              [1521036430000, 1052086272],
              [1521036490000, 1051967488],
              [1521036550000, 1052356608],
              [1521036610000, 1053011968],
              [1521036670000, 1052635136],
              [1521036730000, 1052401664],
              [1521036790000, 1052352512],
              [1521036850000, 1052794880],
              [1521036969000, 1052479488],
              [1521036970000, 1052004352],
              [1521037030000, 1052110848],
              [1521037090000, 1052020736],
              [1521037150000, 1051664384],
              [1521037210000, 1052082176],
              [1521037270000, 1051553792],
              [1521037330000, 1051275264],
              [1521037390000, 1051238400],
              [1521037450000, 1051475968],
              [1521037510000, 1051070464],
              [1521037570000, 1051054080],
              [1521037630000, 1051406336],
              [1521037690000, 1050865664],
              [1521037750000, 1051213824],
              [1521037810000, 1051189248],
              [1521037870000, 1051295744],
              [1521037930000, 1051107328],
              [1521037990000, 1051217920],
              [1521038050000, 1051136000],
              [1521038110000, 1051676672],
              [1521038170000, 1051357184],
              [1521038230000, 1051066368],
              [1521038290000, 1051258880],
              [1521038350000, 1051332608],
              [1521038410000, 1051439104],
              [1521038470000, 1050816512],
              [1521038530000, 1051115520],
              [1521038590000, 1051176960],
              [1521038650000, 1051226112],
              [1521038710000, 1050923008],
              [1521038770000, 1050902528],
              [1521038830000, 1050947584],
              [1521038890000, 1051119616],
              [1521038950000, 1051176960],
              [1521039010000, 1051066368],
              [1521039070000, 1050914816],
              [1521039130000, 1050693632],
              [1521039190000, 1050537984],
              [1521039250000, 1050599424],
              [1521039310000, 1050451968],
              [1521039370000, 1050341376],
              [1521039430000, 1050501120],
              [1521039490000, 1050443776],
              [1521039550000, 1050529792],
              [1521039610000, 1049874432],
              [1521039670000, 1050357760],
              [1521039730000, 1050472448],
              [1521039790000, 1050468352],
              [1521039850000, 1050218496],
              [1521039910000, 1050808320],
              [1521039970000, 1050738688],
              [1521040030000, 1050353664]
            ]
          }
        ]
      },

      itemId: "28330",
      valueType: "3",
      timeFrom: "",
      timeTill: ""
    };
  },
  methods: {
    getItemData: function() {
      this.$http
        .get(zabbixUrl + "/itemData", {
          params: {
            itemId: this.itemId,
            valueType: this.valueType
            //      timeFrom: this.timeFrom,
            //      timeTill: this.timeTill,
          }
        })
        .then(
          function(response) {
            console.log(response);
            this.data = response.body;
          },
          function(error) {
            console.log(error);
          }
        );
    },
    formatData: function() {
      var dataNew = [];
      this.data.forEach(function(element) {
        var timeDate = new Date();
        timeDate.setTime(element[0]);
        dataNew.push([
          [
            timeDate.getFullYear(),
            timeDate.getMonth() + 1,
            timeDate.getDate()
          ].join("/"),
          element[1]
        ]);
      });
      return dataNew;
    }
  },
  mounted() {
    console.log('----')
    //    this.getItemData()
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

</style>
